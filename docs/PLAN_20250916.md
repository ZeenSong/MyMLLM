# PLAN_20250916

## 背景
- 仓库已同步至 GitHub，核心 Geoformer 模块已迁入 `src/geoformer/`，需要补齐包暴露与最小测试保障，为后续与 Qwen 的对接打基础。

## 本轮目标
- 以最小改动保证 `tools/train_geoformer.py` 可在当前环境启动并运行到首个评估节点，用于确认训练脚本链路完整。
- 必要时调整脚本/配置以支持快速冒烟运行，输出关键日志。
- 将测试过程和结果同步至协作文档。

## 动作清单
1. 训练脚本快速跑通准备
   - 审阅 `tools/train_geoformer.py` 所需依赖与默认配置，确认 GPU/数据路径可用。
   - 若训练循环过长，添加参数或临时修改配置（如缩短 epoch、减少样本）以便完成一次训练-评估迭代。
   - 预期改动：视情况更新 `tools/train_geoformer.py` 或 `configs/*.json`（仅限临时模板，不触碰真实数据）。
2. 执行训练冒烟测试
   - 在可控实验设置下运行 `python tools/train_geoformer.py`，确保所有 import、数据加载、Trainer 初始化与前几步迭代顺利进行。
   - 记录运行日志、耗时与潜在告警，必要时截断训练以避免长时间占用资源。
3. 文档同步
   - 在 `docs/History.md` 更新“2025-09-16”条目，记录训练冒烟的环境、命令、结论与后续建议。
   - 若对配置或脚本做了临时调优，备注回滚方法。

## 验证方式
- 直接运行 `python tools/train_geoformer.py`，输出包含 `Trainer will use device:` 与首轮 `eval`/`save` 日志即视为通过。

## 回滚策略
- 若临时参数调整或脚本修改不再需要，可执行 `git checkout -- tools/train_geoformer.py` 恢复版本。
- 删除本地测试生成的模型目录（如 `model/`、`checkpoints/geoformer_pretrain/`）。
